// Generated by CoffeeScript 2.0.0-alpha1
(function(window, document) {
  var Pendef, dir, error, log, type;
  log = console.log, error = console.error, dir = console.dir;
  type = (function() {
    var classToType, i, j, len, name, ref;
    classToType = {};
    ref = "Boolean Number String Function Array Date RegExp Undefined Null Element Document Window".split(/\s+/);
    for (i = j = 0, len = ref.length; j < len; i = ++j) {
      name = ref[i];
      classToType[`[object ${name}]`] = name.toLowerCase();
    }
    return function(obj) {
      var strType;
      strType = Object.prototype.toString.call(obj);
      return classToType[strType] || "object";
    };
  })();
  Pendef = function() {
    var accpro, pen;
    accpro = (el) => {
      return el.__proto__.__proto__.__proto__;
    };
    pen = function(el) {
      var err, func, j, len, srm;
      err = new Error(`Pen: parameter 1 can't be a ${type(el)}`);
      switch (type(el)) {
        case 'null':
        case 'undefined':
        case 'number':
        case 'boolean':
        case 'function':
          throw err;
      }
      srm = "Html Css Attr On Append AppendTo Href Value Id Class Click Remove".split(/\s+/);
      pen.cre = {};
      if (pen.options["to selector"] === true) {
        if (type(el) === 'string') {
          if (pen.options["select all"] === true) {
            pen.cre["el"] = document.querySelectorAll(el);
          } else {
            pen.cre["el"] = document.querySelector(el);
          }
        } else {
          pen.cre["el"] = el;
        }
      } else {
        if (type(el) === 'string') {
          pen.cre["el"] = document.createElement(el);
        } else {
          pen.cre["el"] = el;
        }
      }
      for (j = 0, len = srm.length; j < len; j++) {
        func = srm[j];
        if (accpro(pen.cre["el"])[func] === null || type(accpro(pen.cre["el"])[func]) === 'undefined') {
          accpro(pen.cre["el"])[func] = pen[func];
        }
      }
      pen.accesel = function() {
        return pen.cre["el"];
      };
      pen.debug = function(str, prefix) {
        if (pen.options["debug mode"] === true) {
          return log(`Pen-debug-${(type(prefix) !== 'null' ? prefix : 'unknown_child')}: ${(type(str) === 'string' ? str : type(str) === 'array' ? str.join('\n') : void 0)}`);
        }
      };
      if (pen.options["auto append"] === true) {
        if (pen.options["normally append to"] === "body") {
          document.body.appendChild(pen.cre["el"]);
        } else {
          document.head.appendChild(pen.cre["el"]);
        }
      }
      return pen.cre["el"];
    };
    pen.getElementLayout = function() {
      var classes, el, i, j, len, ref, whole;
      el = pen.accesel();
      whole = "";
      whole = el.tagName.toLowerCase();
      if (el.id.length !== 0) {
        whole += `#${el.id}`;
      }
      classes = [];
      ref = el.classList;
      for (j = 0, len = ref.length; j < len; j++) {
        i = ref[j];
        classes.push(i);
      }
      whole += `.${classes.join(".")}`;
      return whole;
    };
    pen.Attr = function(stroobj, str) {
      var attr, el;
      el = pen.accesel();
      if (stroobj !== null) {
        if (type(stroobj) === 'string') {
          if (str !== null) {
            pen.debug(`attatching '${stroobj}=\"${str}\"' to element '${pen.getElementLayout()}'`, "Attr");
            el.setAttribute(stroobj, str);
            return el;
          } else {
            return el.getAttribute(stroobj);
          }
        } else {
          pen.debug(`attatching attributes to element '${pen.getElementLayout()}'`, "Attr");
          for (attr in stroobj) {
            el.setAttribute(attr, stroobj[attr]);
          }
        }
      } else {
        return el.attributes;
      }
      return el;
    };
    pen.Class = function(nm) {
      var el;
      el = pen.accesel();
      el.setAttribute("class", nm);
      return el;
    };
    pen.Id = function(nm) {
      var el;
      el = pen.accesel();
      el.setAttribute("id", nm);
      return el;
    };
    pen.Html = function(str, app = false) {
      var el;
      el = pen.accesel();
      if (str !== null) {
        if (app === false) {
          el.innerHTML = str;
        } else {
          el.innerHTML += str;
          return el;
        }
      } else {
        return el.innerHTML;
      }
      return el;
    };
    pen.Value = function(str, app = false) {
      var el;
      el = pen.accesel();
      if (str !== null) {
        if (app === false) {
          el.value = str;
        } else {
          el.value += str;
          return el;
        }
      } else {
        return el.value;
      }
      return el;
    };
    pen.Css = function(rules, str) {
      var el, err, rule;
      el = pen.accesel();
      if (type(rules) === 'object') {
        pen.debug(`setting the style of '${pen.getElementLayout()}'`, "Css");
        for (rule in rules) {
          el.style[rule] = rules[rule];
        }
      } else if (type(rules) === 'string') {
        el.style[rules] = str;
      } else {
        err = new Error(`Pen-css: parameter 1 can't be ${type(el)}`);
        throw err;
      }
      return el;
    };
    pen.On = function(type, func, cp = false) {
      var el;
      el = pen.accesel();
      el.addEventListener(type, func, cp);
      return el;
    };
    pen.Append = function(...elems) {
      var el, elem, index, j, len;
      el = pen.accesel();
      for (index = j = 0, len = elems.length; j < len; index = ++j) {
        elem = elems[index];
        el.appendChild(elem);
      }
      return el;
    };
    pen.AppendTo = function(elem) {
      var el;
      el = pen.accesel();
      elem.appendChild(el);
      return el;
    };
    pen.Href = function(hr) {
      var el, err;
      el = pen.accesel();
      if (type(hr) === 'string') {
        pen.debug(`Setting the href attribute to ${hr}`, "Href");
        el.setAttribute("href", hr);
      } else {
        err = new Error("Pen-Href: main parameter 1, can only be a string");
        throw err;
      }
      return el;
    };
    pen.Remove = function() {
      var el;
      el = pen.accesel();
      el.parentNode.removeChild(el);
      return el;
    };
    pen.Create = function(elesx, str) {
      var el;
      el = pen.accesel();
      pen.debug(`Trying to create a new element and set it's parent to ${pen.getElementLayout()}`, "Create");
      elesx = document.createElement(elesx);
      el.appendChild(elesx);
      if (str.match(/parent/gi)) {
        return el;
      } else if (str.match(/child/gi)) {
        return elesx;
      } else {
        throw new Error(`Pen-create invalid: ${str}, either child or parent can be returned`);
      }
    };
    pen.options = {};
    pen.options["auto append"] = false;
    pen.options["to selector"] = false;
    pen.options["select all"] = false;
    pen.options["normally append to"] = "body";
    pen.options["debug mode"] = false;
    pen.setOptions = function(optionname, val) {
      var err, ops, option;
      ops = {
        "auto append": "auto append",
        "to selector": "to selector",
        "normally append to": "normally append to",
        "select all": "select all",
        "debug mode": "debug mode"
      };
      if (type(optionname) === 'string') {
        if (optionname === ops[optionname]) {
          pen.options[optionname] = val;
        } else {
          err = new Error(`unrecgonized option ${optionname}`);
          throw err;
        }
      } else if (type(optionname) === 'object') {
        for (option in optionname) {
          if (option === ops[option]) {
            pen.options[option] = optionname[option];
          } else {
            err = new Error(`unrecgonized option '${option}'`);
            throw err;
          }
        }
      }
      return void 0;
    };
    pen.GetOpitions = function(option) {
      if (option !== null) {
        return pen.options[option];
      } else {
        return pen.options;
      }
    };
    pen.Type = (param) => {
      return type(param);
    };
    pen.Select = function(el) {
      var els;
      pen.options["to selector"] = true;
      els = pen(el);
      pen.options["to selector"] = false;
      return els;
    };
    pen.SelectAll = function(el) {
      var els;
      pen.setOptions({
        'to selector': true,
        'select all': true
      });
      els = pen(el);
      pen.setOptions({
        'to selector': false,
        'select all': false
      });
      return els;
    };
    return pen;
  };
  if (typeof pen === 'undefined') {
    window.pen = Pendef();
  }
})(window, document);
