!function(){let n,t,e;t="p span div a button input h hr b i u img style link meta br hr table tr tb li ul template textarea video".split(/ /),n="click dblclick error mouseover mousemove mouseup mousedown keydown keyup keypress load".split(/ /),e=(e="style title encoding href src rel target cols width height".split(/ /)).concat(n.map(n=>"on"+n));for(let t of n)null==pen.fn[t]&&(pen.fn[t]=function(n,...e){return pen.fn.on.call(this,t,n,...e)},pen.fn[t].remove=function(n,...e){return pen.fn.off.call(this,t,n,...e)},pen.fn[t].trigger=function(...n){return pen.fn.fire.call(this,...n)});for(let n of e)null==pen.fn[n]&&(pen.fn[n]=function(t){return null==t?pen.fn.attr.call(this,n):(pen.fn.attr.call(this,n,t),this)});let l={opler(n,t){null!=n.src&&"img"===t.tag&&t.attr("src",n.src),null!=n.attrs&&t.attr(n.attrs),null!=n.text&&t.html(n.text),null!=n.name&&null!=n.parent&&(n.parent[n.name]=t),null!=n.parent&&null==t.parent&&t.appendTo(n.parent)},handleChildren(n,t){let e,l,r;for(e of t){if("function"!==(l=pen.type(e)))throw new Error('a "child" must be a function');if(null==(r=e.call(n,n))||!(r instanceof pen))throw new Error("the child must return and must be an instance of pen");null==r.parent&&r.appendTo(n)}},handleChildify(n,t){let e=n.tag||n.el;e=e.startsWith("<")?e:"<"+e,e+=e.endsWith(">")?"":">";let l=null!=t?t.create(e,"child"):pen(e);if(n.attrs&&l.attr(n.attrs),(n.text||n.html)&&l.html(n.text||n.html),n.events)for(let t in n.events)console.log(t);return n.children&&l.childify(n.children),l}};for(let n of t){let t="<"+n+">";null==pen[n]&&(pen[n]=function(e={},...r){return n=pen(t),l.opler(e,n),l.handleChildren(n,r),n}),null==pen.fn[n]&&(pen.fn[n]=function(e={},...r){return n=this.create(t,"child"),e.parent=this,l.opler(e,n),l.handleChildren(n,r),null!=e.returnEl&&e.returnEl?n:this})}pen.fn.childify=function(n){for(let t of n)l.handleChildify(t,this);return this},pen.childify=function(n){let t=[];for(let e of n)t.push(l.handleChildify(e));return t.length>1?t:t[0]},pen.fn.eqto=function(n,t){switch(t=t instanceof pen?t.el:t,n){case"this":return this.el===t;case"parent":return this.parent===t;default:return console.warn("Unknown type: "+n+"\nResolving to 'this'"),this.el===t}}}();