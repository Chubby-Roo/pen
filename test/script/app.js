// Generated by CoffeeScript 2.0.0-alpha1

/*
 * IF you read the files aka: app.coffee (this) and pen.coffee it'll be messy yes.
 * IT is intended to be like so.
 */
(function(window, document) {
  var Start, body, contextmenu, dir, error, head, log;
  log = console.log, error = console.error, dir = console.dir;
  body = document.body, head = document.head;
  pen.setOptions("debug mode", true);
  contextmenu = function(e) {
    var Remove, cntmnu;
    e.preventDefault();
    cntmnu = pen("div").Html("moo").Css({
      left: `${e.clientX}px`,
      top: `${e.clientY}px`,
      position: "fixed",
      'z-index': 9999
    });
    Remove = function() {
      pen(cntmnu).Remove();
      pen(window).removeEventListener("click", Remove);
    };
    pen(cntmnu).AppendTo(body);
    pen(window).On("click", Remove);
    return cntmnu;
  };
  Start = function(e) {
    var closebtn, header, reloader, title;
    pen(window).On("contextmenu", contextmenu);
    header = pen("div").Class("header-title");
    title = pen("span").Class("title").Html(document.title);
    reloader = pen("span").Class("header-button Ril").Html("reload").On("click", (e) => {
      e.preventDefault();
      location.reload();
    });
    closebtn = pen("span").Class("header-button Ril").Html("X").On("click", (e) => {
      e.preventDefault();
      close();
    });
    pen(header).Append(title, closebtn, reloader).AppendTo(body);
    return log(`Loading took ${Math.round(e.timeStamp)} second(s)`);
  };
  return window.onload = Start;
})(window, document);
