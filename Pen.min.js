(function(){let e,g;e={attrReg:/([^\n\ ]*?)=(['"]([^\n'"]*?)['"]|(true|false))/gi,cc(h){return h.replace(/(?:_|-| )(\w)/g,(j,k)=>k.toUpperCase())},slice(h){return Array.prototype.slice.call(h)},type:function(){for(var h={},j=['Boolean','Number','String','Function','Array','Date','RegExp','Undefined','Null','Error','Symbol','Promise','NamedNodeMap','Map','NodeList','DOMTokenList','DOMStringMap','CSSStyleDeclaration'],k=0,m=j.length;k<m;k++)h[`[object ${j[k]}]`]=j[k].toLowerCase();return n=>h[Object.prototype.toString.call(n)]||'object'}(),random(h){return h[Math.floor(Math.random()*h.length)]},check(h,j){return'string'===this.type(h)?new RegExp(h,j||'gi'):h},parse(h){var j={},k=h.match(this.attrReg);if(null!=k&&0!==k.length){for(var o,p,m=0,n=k.length;m<n;m++)k[m].includes('=')&&([o,p]=k[m].split('='),j[o]=p.replace(/"|'/g,''));return 0===Object.keys(j).length?null:j}},pErr(h,j){throw j=new Error(j),j.name=h,c},pLog(){console.log(`%c${a}:\n  %c${b}`,'font-style:bold; color:white','color:grey')},fracture(h,j,k,m){var o,n=this.type(h.el[j]);for(var p in k)o=null==m?p:`${m}-${p}`,'object'===this.type(k[p])?this.fracture(h,j,k[p],o):'function'===n?h.el[j](o,k[p]):h.el[j][o]=k[p];return h},parseEl(h){var j,k,m,n;return j=h.substring(h.search(/</),h.search(/>/)+1),k=j.substring(j.search(/</)+1,j.search(j.match(/<([^\n ]+)>/)?/>/:/ /)),m=j.substring(j.search(/ /)+1,j.search(/>/)),n=h.substring(j.length,h.search(/<\//)),[`<${k}`===m?null:m,k,n==j?null:''===n?null:n]}},g=function(h,j={}){if(!(this instanceof g))return new g(...arguments);if(h instanceof g)return h;this.el=h,this.start(j)},g.handoff=(h,j=!1)=>j?g(h):h,g.$=(h,j)=>'string'===e.type(h)?g.handoff(document.querySelector(h),j):h,g.$$=h=>document.querySelectorAll(h),g.create=(h,j)=>g.handoff(document.createElement(h),j),g.all=(h,j,...k)=>{for(var m=0,n=h.length;m<n;m++)h[m][j](...k)},g.display=(h,j)=>{var k=g.$(h,!0),m=k.text;m=m.replace(/-([^\n]*?)-/g,(n,o)=>j[o]),k.html(m)},g.fn=g.prototype={constructor:g,start(){if('string'===e.type(this.el))if(this.el.startsWith('<')){var[j,k,m]=e.parseEl(this.el);if(this.el=g.create(k),null!=j){let n=e.parse(j);null!=n&&this.attr(n)}null!=m&&0!==m.length&&this.html(m,{parse:!0})}else this.el=g.$(this.el);this.partialSetup()},toString(){return this.el.outerHTML},partialSetup(){if(null!=this.el){var h=!0,j=!0;switch(Object.defineProperty(this,'tag',{get(){return(this.el.tagName||'UNPARSED-OR-IOS-ELEMENT').toLowerCase()},enumerable:j}),this.el='template'===this.tag?this.el.content:this.el,Object.defineProperties(this,{text:{get(){return this.html()},set(k){return this.html(k)},configurable:h,enumerable:j},Children:{get(){for(var k=e.slice(this.el.children),m=0,n=k.length;m<n;m++)k[m]=g(k[m]);return k},set(k){return this.append(...k)},configurable:h,enumerable:j},Parent:{get(){return this.el.parentNode||null},set(k){return this.appendTo(k)},configurable:h,enumerable:j},Classes:{get(){return e.slice(this.el.classList)},set(k){return this.toggle(k)},configurable:h,enumerable:j},attrs:{get(){for(var k={},m=e.slice(this.el.attributes),n=0,o=m.length;n<o;n++)k[m[n].name]=m[n].value;return k},set(k){return this.attr(k)},configurable:h,enumerable:j},selector:{get(){return`${this.tag}${null==this.attrs.id?'':`#${this.attrs.id}`}${null==this.attrs.class?'':`.${this.Classes.join('.')}`}`},enumerable:j},size:{get(){return this.el.getBoundingClientRect()},enumerable:j},hidden:{get(){return'none'===this.css('display')},enumerable:j},ops:{get(){return{parseIt:!1,app:!1,parse:!1}},set(k){return{parseIt:null!=k&&(k.parseIt||!1),app:null!=k&&(k.app||!1),parse:null!=k&&(k.parse||!1)}},enumerable:j,configurable:h}}),!0){case this.el instanceof Document:g.prototype.ready=function(){return this.on('DOMContentLoaded',...arguments),this};break;case this.el instanceof Window:this.doc=this.el.document;break;case'template'===this.tag:g.prototype.clone=function(){return document.importNode(...arguments),this};break;case'canvas'===this.tag:this.ctx=this.context=this.el.getContext('2d');}return this}},html(h,j){if(null!=h){var{parse:k,app:m}=this.ops=null==j?{}:j,n=k?'innerHTML':'innerText',o=/textarea/i.test(this.tag)?'innerText':n;switch(this.tag){case'input':this.el.value=m?this.el.value+h:h;break;case'option':this.el.value=m?this.el.value+h:h,this.el.innerText=m?this.el.value+h:h;break;default:this.el[o]=m?this.el[o]+h:h;}return this}switch(this.tag){case'input':case'option':case'textarea':return this.el.value;break;default:return this.el.innerText;}},attr(h,j){if(null!=h)switch(!0){case'object'===e.type(h):return e.fracture(this,'setAttribute',h);case null!=j:return this.el.setAttribute(h,j),this;default:return this.el.getAttribute(h);}else return this.attrs},css(h,j){if(null!=h)switch(!0){case'object'===e.type(h):return e.fracture(this,'style',h);case null!=j:return this.el.style[e.cc(h)]=j,this;default:return this.el.style[h];}else return this.el.style},on(h,j,k,m){return k=k||!1,this.el.events=this.el.events||{},this.el.addEventListener(h,j,k),this.el.events[h]={capture:k},this.el.events[h][null==m?j.name||'func':m]=j,this},off(h,j,k){return this.el.removeEventListener(h,null==k?j:this.el.events[h][k]),delete this.el.events[h][null==k?j.name||'func':k],this},append(...h){if(0===h.length)return void e.pLog(`Pen-${this.selector}-Append`,'Argument passed had 0 elements');for(var m,j=0,k=h.length;j<k;j++)m=g.$(h[j]),this.el.appendChild(m instanceof g?m.el:m);return this},appendTo(h){return g(h).append(this),this},remove(){return null==this.Parent?console.warn('Couldn\'t remove '+this):this.Parent.removeChild(this.el),this},$(h){return g.handoff(this.el.querySelector(h),this.ops.parseIt)},$$(h){return this.el.querySelectorAll(h)},create(h,j){return h=g(h),this.append(h),'parent'===j?this:'child'===j?h:this},toggle(...h){for(var j=0,k=h.length;j<k;j++)this.el.classList.toggle(h[j]);return this},hasClass(h){for(var j=0,k=this.Classes.length;j<k;j++)if(this.Classes[j]===h)return!0;return!1}},g.tools=e,window.pen=g,window.pDoc=g(document),window.pWin=g(window),null==document.body?document.addEventListener('DOMContentLoaded',()=>{window.body=document.body,window.head=document.head,window.pHead=g(head),window.pBody=g(body)},{once:!0}):(window.body=document.body,window.head=document.head,window.pHead=g(head),window.pBody=g(body))}).call(this);
