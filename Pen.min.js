(function(){let a;a=function(b,c={}){return this instanceof a?b instanceof a?b:void(this.el=b,a.start.call(this)):new a(...arguments)},a.cc=b=>b.replace(/[_\- ](\w)/g,(c,d)=>d.toUpperCase()),a.slice=b=>[].slice.call(b),a.pipeline=(b,...c)=>{for(let d=0,e=c.length;d<e;d++)b='string'===a.type(c[d])?window[c[d]](b):c[d](b);return b},a.penpip=(b,...c)=>{let d;for(let e=0,f=c.length;e<f;e++)d=a[c[e]](b);return d},a.type=function(){let b={},c=['Boolean','Number','String','Function','Array','Date','RegExp','Undefined','Null','Error','Symbol','Promise','NamedNodeMap','Map','NodeList','DOMTokenList','DOMStringMap','CSSStyleDeclaration'];for(let d=0,e=c.length;d<e;d++)b[`[object ${c[d]}]`]=c[d].toLowerCase();return d=>b[{}.toString.call(d)]||'object'}(),a.empty=b=>{switch(a.type(b)){case'array':case'string':return 0===b.length;case'object':if(null!=Object.keys)return 0===Object.keys(b).length&&b.constructor===Object;for(let c in b)if(b.hasOwnProperty(c))return!1;return JSON.stringify(b)===JSON.stringify({});break;case'regexp':return 0===b.source.length;}},a.random=b=>b[Math.floor(Math.random()*b.length)],a.check=(b,c)=>'string'===a.type(b)?new RegExp(b,c||'gi'):b,a.parse=b=>{let c={},d=b.match(/([^\n ]*?)=(['"]([^\n'"]*?)['"]|(true|false))/gi);if(null==d||a.empty(d))return null;for(let g,h,e=0,f=d.length;e<f;e++)g=d[e],g.includes('=')&&(h=g.search(/=/),c[g.substr(0,h)]=g.substr(h+1).replace(/["']/g,''));return a.empty(c)?null:c},a.fracture=function(b,c,d){let f,g,e=a.type(this.el[b]);for(g in c)f=null==d?g:`${d}-${g}`,'object'===a.type(c[g])?a.fracture.call(this,b,c[g],f):'function'===e?this.el[b](f,c[g]):this.el[b][f]=c[g];return this},a.parseEl=b=>{let c,d,e,f;return c=b.substr(b.search(/</),b.search(/>/)+1),d=c.substr(c.search(/</)+1,c.search(/<([^\n ]+)>/.test(c)?/>/:/ /)-1),e=c.substr(c.search(/ /)+1,c.search(/>/)),f=b.substr(c.length,b.search(/<\//)),e=`<${d}`===e?null:e,f=f==c?null:a.empty(f)?null:f,{attrs:e,tag:d,text:f}},a.handoff=(b,c=!1)=>c?a(b):b,a.$=(b,c)=>'string'===a.type(b)?a.handoff(document.querySelector(b),c):b,a.$$=(b,c)=>{let d='string'===a.type(b)?document.querySelectorAll(b):b,e=[];for(let f=0,g=d.length;f<g;f++)e.push(a.handoff(d[f],c));return e},a.create=(b,c)=>a.handoff(document.createElement(b),c),a.all=(b,c,...d)=>{for(let e=0,f=b.length;e<f;e++)b[e][c](...d)},a.display=(b,c)=>{let d=a.$(b,!0);d.text=d.text.replace(/-([^\n]*?)-/g,(e,f)=>c[f])},a.start=function(){if('string'===a.type(this.el))if(this.el.startsWith('<')){let b=a.parseEl(this.el);if(this.el=a.create(b.tag),null!=b.attrs){let c=a.parse(b.attrs);null!=c&&this.attr(c)}null==b.text||a.empty(b.text)||this.html(text,{parse:!0})}else this.el=a.$(this.el);if(null!=this.el){switch(this.el='template'===this.tag?this.el.content:this.el,this.cusOps={},!0){case this.el instanceof Document:a.prototype.ready=function(){return this.on('DOMContentLoaded',...arguments),this};break;case this.el instanceof Window:this.doc=this.el.document;break;case'template'===this.tag:a.prototype.clone=function(){return document.importNode(...arguments),this};break;case'canvas'===this.tag:this.ctx=this.context=this.el.getContext('2d');}return this}},a.fn=a.prototype={constructor:a,toString(){return this.selector},get tag(){return(this.el.tagName||'UNPARSED-OR-IOS-ELEMENT').toLowerCase()},get text(){return this.html()},set text(b){return this.html(b)},get children(){let b=a.slice(this.el.children),c=0,d=b.length;for(;c<d;c++)b[c]=a(b[c]);return b},set children(b){return this.append(...b),this},get offset(){return{left:this.el.offsetLeft,top:this.el.offsetTop,width:this.el.offsetWidth,height:this.el.offsetHeight}},get center(){return{x:this.offset.left+this.offset.width/2,y:this.offset.top+this.offset.height/2}},get parent(){return this.el.parentNode||null},set parent(b){return this.appendTo(b)},get classes(){return a.slice(this.el.classList)},set classes(b){return this.toggle(b)},get attrs(){let b={},c=a.slice(this.el.attributes);for(let d=0,e=c.length;d<e;d++)b[c[d].name]=c[d].value;return b},set attrs(b){return this.attr(b)},get selector(){let d,b=this.attrs,c='',e=null==this.attr('id')?'':`#${this.attr('id')}`,f=null==this.attr('class')?'':`.${this.classes.join('.')}`;for(d in b)/class|id|style/i.test(d)||(c+=`[${d}="${b[d]}"]`);return`${this.tag}${e}${f}${a.empty(c)?'':c}`},get size(){return this.el.getBoundingClientRect()},get hidden(){return'none'===this.css('display')},get ops(){return{parseIt:this.cusOps.parseIt||!1,app:this.cusOps.app||!1,parse:this.cusOps.parse||!1}},set ops(b){let c=null!=b;return this.cusOps={parseIt:!!c&&(b.parseIt||!1),app:!!c&&(b.app||!1),parse:!!c&&(b.parse||!1)},this.cusOps},get siblings(){return{next:this.el.nextSibling,previous:this.el.previousSibling}},html(b,c){let d,e,f;return({parse:d,app:e}=null==c?a.empty(this.cusOps)?this.ops:this.cusOps:c),f='input'===this.tag||'option'===this.tag?'value':d?'innerHTML':'innerText',a.pipeline(arguments,a.slice,a.empty)?this.el[f]:(res2=e?this.el[f]+b:b,this.el[f]=res2,'option'===this.tag&&(this.el.innerHTML=this.el[f]),this)},attr(b,c){if(null!=b)switch(!0){case'object'===a.type(b):return a.fracture.call(this,'setAttribute',b);case null!=c:return this.el.setAttribute(b,c),this;default:return this.el.getAttribute(b);}else return this.attrs},css(b,c){if(null!=b)switch(!0){case'object'===a.type(b):return a.fracture.call(this,'style',b);case null!=c:return this.el.style[a.cc(b)]=c,this;default:return this.el.style[b];}else return this.el.style},on(b,c,d,e){return d=d||!1,this.el.events=this.el.events||{},this.el.addEventListener(b,c,d),this.el.events[b]={capture:d},this.el.events[b][null==e?c.name||'func':e]=c,this},off(b,c,d){return this.el.removeEventListener(b,null==d?c:this.el.events[b][d]),delete this.el.events[b][null==d?c.name||'func':d],this},insert(b=!0,c,...d){c=a(c);let e=b?c.el:c.siblings.next;for(let h,f=0,g=d.length;f<g;f++)h=a.$(d[f]),console.log(h),c.parent.insertBefore(h instanceof a?h.el:h,e);return this},append(...b){for(let e,c=0,d=b.length;c<d;c++)e=a.$(b[c]),this.el.appendChild(e instanceof a?e.el:e);return this},appendTo(b){return a(b).append(this),this},remove(){if(args=a.slice(arguments),'boolean'!==a.type(args[0]))for(let d,b=0,c=args.length;b<c;b++){if(d=a.$(args[b]),null==d)throw new Error(`Couldn't find ${args[b]}`);this.el.removeChild(d instanceof a?d.el:d)}else if(args[0])if(null!=this.parent)this.parent.removeChild(this.el);else throw new Error('This element has no parent');return this},$(b,c){return op=null==c?this.ops.parseIt:c,a.handoff(this.el.querySelector(b),op)},$$(b,c){if(op=null==c?this.ops.parseIt:c,op){let d=this.el.querySelectorAll(b),e=[];for(let f=0,g=d.length;f<g;f++)e.push(a.handoff(d[f],op));return e}return this.el.querySelectorAll(b)},create(b,c){return b=a(b),this.append(b),'parent'===c?this:'child'===c?b:this},toggle(...b){return b.forEach(c=>this.el.classList.toggle(c)),this},hasClass(b){for(let c=0,d=this.classes.length;c<d;c++)if(this.classes[c]===b)return!0;return!1}},window.pen=a,window.pDoc=a(document),window.pWin=a(window),document.body?(window.body=document.body,window.head=document.head,window.pHead=a(head),window.pBody=a(body)):document.addEventListener('DOMContentLoaded',()=>{window.body=document.body,window.head=document.head,window.pHead=a(head),window.pBody=a(body)},{once:!0})}).call(this);
