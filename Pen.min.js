(function(){let a;a=function(b,c={}){return this instanceof a?b instanceof a?b:void(this.el=b,a.start.call(this)):new a(b,c)},a.cc=a=>a.replace(/[_\- ](\w)/g,(a,b)=>b.toUpperCase()),a.slice=a=>[].slice.call(a),a.pipeline=(b,c=!1,...d)=>{for(let e of d)b="string"===a.type(e)?(c?a:window)[e](b):e(b);return b},a.type=function(){let a={},b=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null","Error","Symbol","Promise","NamedNodeMap","Map","NodeList","DOMTokenList","DOMStringMap","CSSStyleDeclaration"];for(let c=0,d=b.length;c<d;c++)a[`[object ${b[c]}]`]=b[c].toLowerCase();return b=>a[{}.toString.call(b)]||"object"}(),a.empty=b=>{switch(a.type(b)){case"array":case"string":return 0===b.length;case"object":if(null!=Object.keys)return 0===Object.keys(b).length&&b.constructor===Object;for(let a in b)if(b.hasOwnProperty(a))return!1;return"{}"===JSON.stringify(b);case"regexp":return 0===b.source.length;default:console.error("Unknown type || cannot calculate size");}},a.random=a=>a[Math.floor(Math.random()*a.length)],a.check=(b,c="gi")=>"string"===a.type(b)?new RegExp(b,c):b,a.parse=b=>{let c={},d=b.match(/([^\n ]*?)=(['"]([^\n'"]*?)['"]|(true|false|yes|no))/gi);if(null==d||a.empty(d))return null;for(let a,e,f=0,g=d.length;f<g;f++)a=d[f],a.includes("=")&&(e=a.search(/=/),c[a.substr(0,e)]=a.substr(e+1).replace(/["']/g,""));return a.empty(c)?null:c},a.fracture=function(b,c,d){let e,f,g=a.type(this.el[b]);for(f in c)e=null==d?f:`${d}-${f}`,"object"===a.type(c[f])?a.fracture.call(this,b,c[f],e):"function"===g?this.el[b](e,c[f]):this.el[b][e]=c[f];return this},a.parseEl=(b,c=!1)=>{if(c){let c=new window.DOMParser().parseFromString(b,"text/html").body.children;return c=a.slice(c),c=1===c.length?c[0]:c,c}let d,e,f,g;return d=b.substr(b.search(/</),b.search(/>/)+1),e=d.substr(d.search(/</)+1,d.search(/<([^\n ]+)>/.test(d)?/>/:/ /)-1),f=d.substr(d.search(/ /)+1,d.search(/>/)),g=b.substr(d.length,b.search(/<\//)),f=`<${e}`===f?null:f,g=g===d?null:a.empty(g)?null:g,{attrs:f,tag:e,text:g}},a.handoff=(b,c=!1)=>c?a(b):b,a.$=(b,c)=>"string"===a.type(b)?a.handoff(document.querySelector(b),c):b,a.$$=(b,c)=>{let d="string"===a.type(b)?document.querySelectorAll(b):b;for(let e=0,f=d.length;e<f;e++)d[e]=a.handoff(d[e],c);return d},a.create=(b,c)=>a.handoff(document.createElement(b),c),a.all=(a,b,...c)=>{for(let d=0;d<a;d++)a[d][b](...c)},a.display=(b,c)=>{let d=a.$(b,!0);d.text=d.text.replace(/-([^\n]*?)/g,(a,b)=>c[b])},a.start=function(){if("string"===a.type(this.el)){let b=a.parseEl(this.el);if(this.el=a.create(b.tag),null!=b.attrs){let c=a.parse(b.attrs);null!=c&&this.attr(c)}null==b.text||a.empty(b.text)||this.html(text,{parse:!0})}else this.el=a.$(this.el);if(null==this.el)return void console.warn("Was not able to recieve data.");switch(this.el="template"===this.tag?this.el.content:this.el,this.cusOps={},!0){case this.el instanceof Document:a.prototype.ready=function(){return this.on("DOMContentLoaded",...arguments),this};break;case this.el instanceof Window:this.doc=this.el.document;break;case"template"===this.tag:a.prototype.clone=function(){return document.importNode(...arguments),this};break;case"canvas"===this.tag:this.ctx=this.context=this.el.getContext("2d");}return this},a.fn=a.prototype={constructor:a,toString(){return this.selector},get tag(){return(this.el.tagName||"UNPARSED-OR-IOS-ELEMENT").toLowerCase()},get text(){return this.html()},set text(a){this.html(a)},get children(){let b=a.slice(this.el.children);for(let c=0,d=b.length;c<d;c++)b[c]=a(b[c]);return b},set children(b){if("array"!==a.type(b))throw new Error("Must be an array.");this.append(...b)},get offset(){return{left:this.el.offsetLeft,top:this.el.offsetTop,width:this.el.offsetWidth,height:this.el.offsetHeight}},get center(){return{x:this.offset.left+this.offset.width/2,y:this.offset.top+this.offset.height/2}},get parent(){return this.el.parentNode||null},set parent(a){this.appendTo(a)},get classes(){return a.slice(this.el.classList)},set classes(a){return this.toggle(a)},get attrs(){let b={},c=a.slice(this.el.attributes);for(let a of c)b[a.name]=a.value;return b},set attrs(a){this.attr(a)},get selector(){let b,c=this.attrs,d="",e=null==this.attr("id")?"":`#${this.attr("id")}`,f=null==this.attr("class")?"":`.${this.classes.join(".")}`;for(b in c)/class|id|style/i.test(b)||(d+=`[${b}="${c[b]}"]`);return`${this.tag}${e}${f}${a.empty(d)?"":d}`},get size(){return this.el.getBoundingClientRect()},get hidden(){return"none"===this.css("display")},get ops(){return{parseIt:this.cusOps.parseIt||!1,app:this.cusOps.app||!1,parse:this.cusOps.parse||!1}},set ops(a){let b=null!=a;return this.cusOps={parseIt:!!b&&(a.parseIt||!1),app:!!b&&(a.app||!1),parse:!!b&&(a.parse||!1)},this.cusOps},get siblings(){return{next:this.el.nextSibling,previous:this.el.previousSibling}},clone(b=!0,c){return a.handoff(this.el.cloneNode(b),c)},html(b,c){let d,e,f;return({parse:d,app:e}=null==c?a.empty(this.cusOps)?this.ops:this.cusOps:c),f="input"===this.tag||"option"===this.tag?"value":d?"innerHTML":"innerText",a.pipeline(arguments,a.slice,a.empty)?this.el[f]:(res2=e?this.el[f]+b:b,this.el[f]=res2,"option"===this.tag&&(this.el.innerHTML=this.el[f]),this)},attr(b,c){if(null!=b)switch(!0){case"object"===a.type(b):return a.fracture.call(this,"setAttribute",b);case"boolean"===a.type(c):return this.el.removeAttribute(b),this;case null!=c:return this.el.setAttribute(b,c),this;default:return this.el.getAttribute(b);}else return this.attrs},css(b,c){if(null!=b)switch(!0){case"object"===a.type(b):return a.fracture.call(this,"style",b);case null!=c:return this.el.style[a.cc(b)]=c,this;default:return this.el.style[b];}else return this.el.style},on(a,b,c,d){return c=c||!1,this.el.events=this.el.events||{},this.el.addEventListener(a,b,c),this.el.events[a]={capture:c},this.el.events[a][null==d?b.name||"func":d]=b,this},off(a,b,c){return this.el.removeEventListener(a,null==c?b:this.el.events[a][c]),delete this.el.events[a][null==c?b.name||"func":c],this},insert(b=!0,c,...d){c=c instanceof a?c:a(c);let e="string"===a.type(b)?"before"===b?c.el:c.siblings.next:b?c.el:c.siblings.next;for(let f,g=0,h=d.length;g<h;g++)f=a.$(d[g]),c.parent.insertBefore(f instanceof a?f.el:f,e);return this},append(...b){for(let c,d=0,e=b.length;d<e;d++)c=a.$(b[d]),this.el.appendChild(c instanceof a?c.el:c);return this},appendTo(b){return a(b).append(this),this},remove(){if(args=a.slice(arguments),"boolean"!==a.type(args[0])){for(let b of args)if("object"===a.type(b)&&b instanceof a)b.remove(!0);else{if(b=a.$(b),null==b)throw new Error(`Couldn't find ${b}`);this.el.removeChild(b instanceof a?b.el:b)}}else if(args[0])if(null!=this.parent)this.parent.removeChild(this.el);else throw new Error("This element has no parent");return this},$(b,c){return op=null==c?this.ops.parseIt:c,a.handoff(this.el.querySelector(b),op)},$$(b,c){if(op=null==c?this.ops.parseIt:c,op){let c=this.el.querySelectorAll(b),d=[];for(let b=0,e=c.length;b<e;b++)d.push(a.handoff(c[b],op));return d}return this.el.querySelectorAll(b)},create(b,c){return b=a(b),this.append(b),"parent"===c?this:"child"===c?b:this},toggle(...a){return a.forEach(a=>this.el.classList.toggle(a)),this},hasClass(a){for(let b=0,c=this.classes.length;b<c;b++)if(this.classes[b]===a)return!0;return!1}},window.pen=a,window.pDoc=a(document),window.pWin=a(window),document.body?(window.body=document.body,window.head=document.head,window.pHead=a(head),window.pBody=a(body)):document.addEventListener("DOMContentLoaded",()=>{window.body=document.body,window.head=document.head,window.pHead=a(head),window.pBody=a(body)},{once:!0})})(this);
