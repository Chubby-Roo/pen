var exists,pen,type;type=function(){var t,e,n,i,s,o;for(t={},e=n=0,i=(o="Boolean Number String Function Array Date RegExp Undefined Null Error Symbol".split(/\s+/gi)).length;n<i;e=++n)s=o[e],t[`[object ${s}]`]=s.toLowerCase();return function(e){var n;return n=Object.prototype.toString.call(e),t[n]||"object"}}(),exists=function(t){return null!==t&&void 0!==t},(pen=function(t,e=!1,n=document.body){var i,s,o,r,l,h;if(l=(t=>{var e,n,i,s,o,r,l,h,p;this.attributes={};this.style={};this.events={};this.text=void 0;p=/<([^\n]*?)>/gi;e=/\ ([^\n]*?)=['"]([^\n]*?)['"]/gi;if("string"===type(t))if(!0===p.test(t))for(t=t.replace(/<|>/gi,""),!0===e.test(t)&&(h=function(){var n,i,s,o,r,l;for(l=[],i=s=0,o=(n=t.match(e)).length;s<o;i=++s)r=(r=n[i]).trim(),r=JSON.parse(r.replace(/([^\n]*?)=['"]([^\n]+)['"]/gi,function(...t){var e;return e={},e[t[1]]=t[2],JSON.stringify(e)})),l.push(r);return l}(),t=t.replace(/\ ([^\n]*?)="([^\n]*?)"/gi,"")),n=document.createElement(t),i=s=0,o=h.length;s<o;i=++s){l=h[i];for(r in l)n.setAttribute(r,l[r]),this.attributes[r]=l[r]}else n=document.querySelector(t);else n=t;this.element=this.el=n;this.tag=n.tagName.toLowerCase();"template"===this.tag?(this.content=n.content,this.children=n.content.children,pen.fn.clone=function(t=!1){return document.importNode(this.el.content,t)}):this.children=t.children;this.Id=n.getAttribute("id");this.Class=n.getAttribute("class");this.Parent=exists(n.parentNode)?n.parentNode:"no parent";this.localName=this.tag+(null!=this.Id?`#${this.Id}`:"")+(null!=this.Class?`.${this.Class}`:"");return n}),!(this instanceof pen))return new pen(t,e,n);if(t instanceof Document)this.element=this.el=t,this.events={},this.body=t.body,this.head=t.head,pen.fn.ready=function(t,e){return this.on("DOMContentLoaded",t,e),this};else if(t instanceof pen)for(r in t)this[r]=t[r];else l(t);if("boolean"===type(e))!0===e&&pen(n).append(el);else{if("object"!==type(e))throw new Error(`Pen: option 1 can't be a ${type(e)}`);for(s=0,o=e.length;s<o;s++)"options"!==(i=e[s])?this.attr(i,e[i]):(h=e[i],exists(h.options)?exists(h.options.autoAttach)?!0===h.options.autoAttach&&h.options.autoAttachTo.appendChild(el):h.options.autoAttach=!1:(h.options.autoAttach=!1,h.options.autoAttachTo=document.body))}}).fn=pen.prototype={constructor:pen},pen.prototype.initLocalName=function(){return this.tag,null!=this.Id&&`#${this.Id}`,null!=this.Class&&`.${this.Class}`,this},pen.prototype.handleObject=function(t,e){var n;for(n in t)e(n,this,t);return this},pen.prototype.selfInstance=function(t,e){return t instanceof pen&&e(t,this),this},pen.prototype.html=function(t,e=!1){var n;switch(n=(n=>{this.text=t;return exists(t)?!0===e?(this.element[n]+=t,this):(this.element[n]=t,this):this.element[n]}),this.tag){case"input":case"option":case"textarea":return n("value");case"template":if("object"!==type(t))throw new Error("parameter 1 must be an element/object");return this.element.content.appendChild(t),this;default:return n("innerHTML")}},pen.prototype.attr=function(t,e){return null!=t?"object"===type(t)?(null!=t.id&&(this.Id=t.id),null!=t.class&&(this.Class=t.class),this.handleObject(t,function(e,n){return n.attributes[e]=t[e],n.element.setAttribute(e,t[e]),n})):null!=e?("id"===t&&(this.Id=e),"class"===t&&(this.Class=e),this.element.setAttribute(t,e),this.initLocalName(),this):(this.initLocalName(),this.element.getAttribute(t)):this.attributes},pen.prototype.css=function(t,e){return null!=t?"object"===type(t)?this.handleObject(t,function(e,n){return n.style[e]=t[e],n.element.style[e]=t[e],n}):null!=e?(this.style[t]=e,this.element.style[t]=e,this):this.element.style[t]:this.style},pen.prototype.on=function(t,e,n){var i;return this.events[t]={},i=((t,e,n)=>{this.events[t].capture=n;null!=this.element.addEventListener?this.element.addEventListener(t,e,n):null!=this.element.attachEvent?this.element.attachEvent(t,e):this.element[`on${t}`]=e}),this.events[t].fn=e,i(t,e,n),this},pen.prototype.off=function(t,e){return function(t,e=this.events[t].fn){this.element.removeEventListener?this.element.removeEventListener(t,e):this.element.detachEvent?this.element.detachEvent(t,e):this.element[`on${t}`]=void 0,delete this.events[t]}(t,e)},pen.prototype.is=function(t){return this.tag===t},pen.prototype.append=function(...t){var e,n,i,s;for(n=i=0,s=t.length;i<s;n=++i)(e=t[n])instanceof pen&&(e.Parent=this.element),"template"===this.tag?this.element.content.appendChild(e instanceof pen?e.el:e):this.element.appendChild(e instanceof pen?e.el:e);return this},pen.prototype.appendTo=function(t){return this.Parent=t instanceof pen?t.el:t,pen(t).append(this.element),this},pen.prototype.remove=function(){if("no parent"===this.Parent)throw new Error(`Pen-remove: There's no parent to remove this (${this.localName}) from`);return this.Parent.removeChild(this.element),this.Parent=void 0,this},pen.prototype.select=pen.prototype.$=function(t){return"template"===this.tag?this.element.content.querySelector(t):this.element.querySelector(t)},pen.prototype.selectAll=pen.prototype.$$=function(t){return"template"===this.tag?this.element.content.querySelectorAll(t):this.element.querySelectorAll(t)},pen.prototype.create=pen.prototype.createElement=function(t,e="return child"){var n,i,s,o,r,l;if(t=`<${t}>`,t=pen(t),this.append(t),e.startsWith("return")){if("parent"===(n=e.split(/\s+/gi).slice(1)[0].toLowerCase()))return this;if("child"===n)for(s=o=0,r=(l=this.children).length;o<r;s=++o)if((i=l[s])===t.element)return i=pen(i)}},pen.prototype.insertParentBefore=function(t,e){var n;return n=this.el instanceof pen?this.element.el:this.element,e instanceof pen&&(e=e.el),t.insertBefore(n,e),this},function(){var t;t="id class href src contentEditable charset title rows cols".split(/\s+/),"click keydown keyup keypress mousedown mouseup mouseover mousepress mouseout contextmenu dblclick".split(/\s+/).forEach(function(t){return pen.fn[t]=function(...e){return exists(this.events[t])?this.off(t,[...e]):this.on(t,[...e])}}),t.forEach(function(t){return pen.fn[t]=function(e){return exists(e)?this.attr(t,e):this.attr(t)}})}(),"undefined"!=typeof module&&null!==module&&(null!=module.exports?module.exports={pen:pen,exists:exists,type:type}:(window.pen=pen,window.exists=exists,window.type=type));