var Start,body,contextmenu,dropdown,head,header,imager,load;({body:body,head:head}=document),load=pen("<p>").id("loader"),pen(body).append(load),load.html("loading..."),(dropdown=function(n="button"){var e,t,o;if(!(this instanceof dropdown))return new dropdown(n);if(n instanceof dropdown)for(e=0,t=n.length;e<t;e++)this[o=n[e]]=n[o];else this.links={},this.container=pen('<div class="dropdown">'),this.button=pen('<button class="dropdown-button">').html(n),this.content=pen('<div class="dropdown-content">'),this.container.append(this.button,this.content)}).fn=dropdown.prototype={constructor:dropdown},dropdown.prototype.addLink=function(n,e,t="no description"){var o,i;return o=pen('<a class="dropdown-content-link" href="'+e+'">').html(n+"<br>"),pen('<span class="dropdown-content-link-location">').html(e+"<br>").appendTo(o),(t=pen('<span class="dropdown-content-link-location">').html(t)).appendTo(o),i=pen('<hr class="dropdown-content-divider">'),this.links[n]={},this.links[n].el=o,this.links[n].hr=i,this.content.append(o,i),this},dropdown.prototype.removeLink=function(n,e=!1){return this.links[n].el.remove(),!0===e&&delete this.links[n],this},dropdown.prototype.deployTo=dropdown.prototype.deploy=function(n){return this.container.appendTo(n),this},dropdown.prototype.css=dropdown.prototype.style=function(n=String,...e){return this[n].css([...e]),this},dropdown.prototype.embedInto=function(n){return this.button.el.outerHTML+this.content.el.outerHTML},contextmenu={commands:{},menu:pen('<div class="contextmenu">').attr("align","center"),add:function(n,e,t="button",o){var i,a,r;return o=`<${o}>`,a=contextmenu,i=pen('<hr class="contextmenu-divider">'),t.match(/link/gi)?r=pen('<a href="'+e+'" class="contextmenu-command link">').html(n):t.match(/button/gi)?r=pen('<span class="contextmenu-command">').on("click",e).html(n):t.match(/custom/gi)&&(r="function"===type(e)?pen(o).on("click",e).html(n).class("contextmenu-command custom"):pen(o).href(e).html(n).class("contextmenu-command custom")),a.commands[n]={},a.commands[n].el=r,a.commands[n].hr=i,a.menu.append(a.commands[n].el,a.commands[n].hr),a},removeCommand:function(n,e=!1){var t;return(t=contextmenu).commands[n].el.remove(),t.commands[n].hr.remove(),!0===e&&delete t.commands[n],t},remove:function(){var n,e;e=contextmenu;for(n in e.commands)e.removeCommand(n);return e},init:function(n){var e,t;(t=contextmenu).menu.css({top:`${n.clientY}px`,left:`${n.clientX}px`});for(e in t.commands)t.menu.append(t.commands[e].el.element,t.commands[e].hr.element);return addEventListener("click",t.remove,{once:!0}),pen(body).append(t.menu),t}},header={buttons:{},head:pen('<div class="header">'),title:pen('<span class="title Lil">').html(document.title),add:function(n,e,t="button",o){var i,a;return o=`<${o}>`,console.log(n),i=header,e instanceof dropdown?(a=pen('<span align="center" class="header-button dropdown Ril">').html(e.button.element.outerHTML+e.content.element.outerHTML),i.buttons[n]=a,i):(t.match(/link/gi)?a=pen('<a class="header-button link Ril" href="'+e+'">').html(n):t.match(/button/gi)?a=pen('<span class="header-button Ril">').on("click",e).html(n):t.match(/custom/gi)&&(a="function"===type(e)?pen(o).on("click",e).html(n).class("header-button custom Ril"):pen(o).href(e).html(n).class("header-button custom Ril")),i.commands[n]=a,i)},removeButton:function(n,e){var t;return t=header,pen(t.buttons[n]).remove(),!0===e&&delete t.buttons[n],t},init:function(){var n,e,t,o,i;i=header,pen(i.head).append(i.title);for(o in i.buttons)pen(i.head).append(i.buttons[o]);for(pen(body).append(i.head),n=[],e=t=0;t<=3;e=++t)n[e]=pen("<br>").el,body.insertBefore(n[e],body.childNodes[0]);return i}},(imager=function(n,e,t="no message was set"){var o,i;if(o=((n,e,t)=>{this.container=pen("<div class='image-view'>");this.link=pen(`<a href='${n}'>`);this.image=pen(`<img src='${n}' class='image-view-image' alt='${e}'>`);this.title=pen("<span class='image-view-title'>").html(e);this.br=pen("<br class='image-breaker'>");this.msg=pen("<span class='image-view-message'>").html(t);return this.link.append(this.title,this.br,this.msg,this.image).appendTo(this.container)}),!(this instanceof imager))return new imager(n,e,t);if(n instanceof imager)for(i in n)this[i]=n[i];else o(n,e,t)}).fn=imager.prototype={constructor:imager},imager.prototype.changeTitle=function(n){return this.title.html(n),this.image.attr("alt",n),this},imager.prototype.deploy=imager.deployTo=function(n){return pen(n).append(this.container),this},Start=function(n){var e,t,o,i,a,r;contextmenu.add("reload",function(n){n.preventDefault(),pen(load).html("reloading..."),location.reload()}).add("go back",function(n){n.preventDefault(),pen(load).html("going back..."),history.back()}).add("go forward",function(n){n.preventDefault(),pen(load).html("going foward..."),history.forward()}).add("github repo",function(n){n.preventDefault(),pen(load).html("going to github repo..."),location.href="http://github.com/Monochromefx/pen"}),addEventListener("contextmenu",function(n){var e;if("tagName"in(e=n.path[0]))switch(e.tagName.toLowerCase()){case"img":contextmenu.add("go to href",pen(e).src(),"link")}n.preventDefault(),contextmenu.init(n)}),r="https://github.com/Monochromefx",a=dropdown("projects").addLink("Pen",`${r}/pen`,"This project").addLink("Schem",`${r}/schem`,"a multipurpose electron app").addLink("Meso",`${r}/meso`,"a lightweight javascript in-browser source code editor"),header.add("pjdropdown",a),header.init(),i=function(n){pen(this).html("<br>want to remove this message?, if so just click me",!0)},e=`load took ${Date.now()-timestamp} seconds`,o=function(n){pen(this).html(e)},t=function(n){pen(this).remove()},load.html(e),load.on("mouseover",i),load.on("mouseout",o),load.on("click",t),imager("pen.logo.png","Pen","the official logo").deploy(body)},pen(document).ready(function(n){return Start(n)});